<mxfile host="app.diagrams.net" modified="2026-02-06T00:00:00.000Z">
  <diagram name="Séquence - Inscription" id="seq-inscription">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="850">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        
        <!-- Titre -->
        <mxCell id="title" value="&lt;b&gt;&lt;font style=&quot;font-size: 16px;&quot;&gt;Diagramme de Séquence - Inscription Passager (US1)&lt;/font&gt;&lt;/b&gt;" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry"/>
        </mxCell>
        
        <!-- Acteur Passager -->
        <mxCell id="actor" value="" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="30" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="actorLabel" value="Passager" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="55" y="145" width="80" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="actorLine" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="95" y="165" as="sourcePoint"/>
            <mxPoint x="95" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Application Mobile -->
        <mxCell id="app" value="Application&lt;br&gt;Mobile" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="80" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="appLine" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="165" as="sourcePoint"/>
            <mxPoint x="340" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- API FastAPI -->
        <mxCell id="api" value="API&lt;br&gt;FastAPI" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="550" y="80" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="apiLine" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="165" as="sourcePoint"/>
            <mxPoint x="610" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Base de données -->
        <mxCell id="db" value="Base de&lt;br&gt;Données" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="820" y="80" width="120" height="60" as="geometry"/>
        </mxCell>
        <mxCell id="dbLine" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="165" as="sourcePoint"/>
            <mxPoint x="880" y="750" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        
        <!-- Messages -->
        
        <!-- 1. Remplir formulaire -->
        <mxCell id="msg1" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="200" as="sourcePoint"/>
            <mxPoint x="95" y="220" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="170" y="200"/>
              <mxPoint x="170" y="220"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg1Label" value="Remplir formulaire&lt;br&gt;(nom, email, password, tel)" style="text;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="105" y="185" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 2. Cliquer S'inscrire -->
        <mxCell id="msg2" value="" style="endArrow=block;html=1;endFill=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="95" y="250" as="sourcePoint"/>
            <mxPoint x="340" y="250" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg2Label" value="Cliquer &quot;S'inscrire&quot;" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="140" y="230" width="140" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 3. POST /register -->
        <mxCell id="msg3" value="" style="endArrow=block;html=1;endFill=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="280" as="sourcePoint"/>
            <mxPoint x="610" y="280" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg3Label" value="POST /register&lt;br&gt;{nom, email, password, tel}" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="380" y="255" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 4. Vérifier email existe -->
        <mxCell id="msg4" value="" style="endArrow=block;html=1;endFill=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="320" as="sourcePoint"/>
            <mxPoint x="880" y="320" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg4Label" value="SELECT * FROM passagers&lt;br&gt;WHERE email = ?" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="640" y="295" width="200" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 5. Retour BDD (non existant) -->
        <mxCell id="msg5" value="" style="endArrow=block;html=1;endFill=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="350" as="sourcePoint"/>
            <mxPoint x="610" y="350" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg5Label" value="NULL (email disponible)" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="660" y="330" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 6. Hasher mot de passe -->
        <mxCell id="msg6" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="610" y="380" as="sourcePoint"/>
            <mxPoint x="610" y="400" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="680" y="380"/>
              <mxPoint x="680" y="400"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg6Label" value="Hasher mot de passe&lt;br&gt;(bcrypt)" style="text;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="620" y="375" width="150" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 7. INSERT passager -->
        <mxCell id="msg7" value="" style="endArrow=block;html=1;endFill=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="430" as="sourcePoint"/>
            <mxPoint x="880" y="430" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg7Label" value="INSERT INTO passagers&lt;br&gt;(nom, email, password_hash, ...)" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="630" y="405" width="240" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 8. Retour ID -->
        <mxCell id="msg8" value="" style="endArrow=block;html=1;endFill=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="460" as="sourcePoint"/>
            <mxPoint x="610" y="460" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg8Label" value="passager_id = 123" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="690" y="440" width="140" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 9. Générer JWT -->
        <mxCell id="msg9" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="610" y="490" as="sourcePoint"/>
            <mxPoint x="610" y="510" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="680" y="490"/>
              <mxPoint x="680" y="510"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg9Label" value="Générer JWT&lt;br&gt;(payload: user_id, email)" style="text;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="620" y="485" width="180" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 10. Retour token -->
        <mxCell id="msg10" value="" style="endArrow=block;html=1;endFill=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="610" y="540" as="sourcePoint"/>
            <mxPoint x="340" y="540" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg10Label" value="{&quot;token&quot;: &quot;eyJ..&quot;, &quot;user&quot;: {...}}" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="370" y="520" width="220" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 11. Afficher succès -->
        <mxCell id="msg11" value="" style="endArrow=block;html=1;endFill=0;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="570" as="sourcePoint"/>
            <mxPoint x="95" y="570" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg11Label" value="&quot;Inscription réussie !&quot;" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="150" y="550" width="160" height="20" as="geometry"/>
        </mxCell>
        
        <!-- 12. Stocker token -->
        <mxCell id="msg12" value="" style="endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="95" y="600" as="sourcePoint"/>
            <mxPoint x="95" y="620" as="targetPoint"/>
            <Array as="points">
              <mxPoint x="170" y="600"/>
              <mxPoint x="170" y="620"/>
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg12Label" value="Stocker token&lt;br&gt;(SharedPreferences)" style="text;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="105" y="595" width="150" height="30" as="geometry"/>
        </mxCell>
        
        <!-- 13. Redirection -->
        <mxCell id="msg13" value="" style="endArrow=block;html=1;endFill=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="95" y="650" as="sourcePoint"/>
            <mxPoint x="340" y="650" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="msg13Label" value="Navigation → Écran Home" style="text;html=1;align=center;" vertex="1" parent="1">
          <mxGeometry x="130" y="630" width="180" height="20" as="geometry"/>
        </mxCell>
        
        <!-- Notes -->
        <mxCell id="note1" value="Note: Le mot de passe est hashé&lt;br&gt;avec bcrypt avant stockage" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="1050" y="300" width="200" height="60" as="geometry"/>
        </mxCell>
        
        <mxCell id="note2" value="Note: Le JWT est stocké localement&lt;br&gt;pour les requêtes suivantes" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="1050" y="400" width="200" height="60" as="geometry"/>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
